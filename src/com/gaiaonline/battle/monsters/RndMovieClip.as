package com.gaiaonline.battle.monsters{	import com.gskinner.utils.Rndm;		import flash.display.DisplayObjectContainer;	import flash.display.MovieClip;	import flash.events.Event;	public class RndMovieClip extends MovieClip	{		private var _monsterMain:MonsterMain2;						public var _id:String = "Na";						public function RndMovieClip()		{						super();			this._id = MovieClip(this).getID();			this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);								}				private function onAddedToStage(evt:Event):void{			//trace("[RndMovieClip ]", this, this._id);				this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);			findMonsterMain();					}				private function findMonsterMain():void{			this.stop();			var mc:DisplayObjectContainer = this.parent;			while( !(mc is MonsterMain2) && mc != null){								mc = mc.parent;			}			if (mc != null ){								this._monsterMain = MonsterMain2(mc);				this._monsterMain.addEventListener("BaseActorIdChanged", onBaseActorIdChanged, false, 0, true);				//trace("[rndMovieClp] MonsterMain2 Found", this._monsterMain.baseActorId)				if (this._monsterMain.baseActorId == null || this._monsterMain.baseActorId == "Na"){					this._monsterMain.baseActorId = int(Math.random()*100).toString();				}				onBaseActorIdChanged(null);			}else{				trace("[rndMovieClip] Could not find MonsterMain2")			}			}				private function onBaseActorIdChanged(evt:Event):void{			if (this._monsterMain != null && this._monsterMain.baseActorId != null){				var rnd:Rndm = new Rndm(this.getStringNumber(this._monsterMain.baseActorId.concat(this._id)));				rnd.random();				var frame:int = rnd.integer(1, this.totalFrames+1);				//trace(this._monsterMain.baseActorId, this._id, frame)					super.gotoAndStop(frame);			}else{				super.stop();			}					}		private function getStringNumber(v:String):int{			var num:int = 0;			for (var i:int = 0; i<v.length; i++){				num += v.charCodeAt(i);			}			return num;		}			public override function play():void{					}			}}